<!DOCTYPE html><html lang="en"><head>

    <link rel="dns-prefetch" href="https://mappingwithd3.com/">
    <link rel="preconnect" href="https://mappingwithd3.com/" crossorigin>
    <title>How to create a simple tooltip in d3.js – Geospatial Data Visualization with d3</title>
    <meta name="description" content="Learn how to create tooltips in d3. This post shows you actual d3 code and adds explanations to the most important aspects of tooltips in d3 and has a demo as well. " />

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,minimum-scale=1">

    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Lato:100,300,400,700,900,100italic,300italic,400italic,700italic,900italic|Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Heebo|Titillium+Web&display=swap" rel="stylesheet">
    

    <link rel="preload" href="https://mappingwithd3.com/css/styles.ae953a7f2ba72e3b647034c2bd72282367b511165f4007ceb780cdc7eb959961.css" as="style">
    <link rel="stylesheet" href="https://mappingwithd3.com/css/styles.ae953a7f2ba72e3b647034c2bd72282367b511165f4007ceb780cdc7eb959961.css" >
    <meta property="og:title" content="How to create a simple tooltip in d3.js" />
<meta property="og:description" content="Learn how to create tooltips in d3. This post shows you actual d3 code and adds explanations to the most important aspects of tooltips in d3 and has a demo as well. " />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mappingwithd3.com/resources/d3/tooltip/" />

<meta property="og:image" content="https://res.cloudinary.com/civicvision/image/upload/f_auto,q_auto,w_auto,dpr_auto,c_limit/geospatial-d3/marketing/tweets/tooltip-full.png" />
<meta property="article:published_time" content="2019-09-01T22:00:00&#43;00:00"/>
<meta property="article:modified_time" content="2019-09-01T22:00:00&#43;00:00"/><meta property="og:site_name" content="Geospatial Data Visualization with d3" />

    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://res.cloudinary.com/civicvision/image/upload/f_auto,q_auto,w_auto,dpr_auto,c_limit/geospatial-d3/marketing/tweets/tooltip-full.png"/>

<meta name="twitter:title" content="How to create a simple tooltip in d3.js"/>
<meta name="twitter:description" content="Learn how to create tooltips in d3. This post shows you actual d3 code and adds explanations to the most important aspects of tooltips in d3 and has a demo as well. "/>

    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    
      
        <link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.css" rel="stylesheet" type="text/css">
      
    

</head>

<script type="text/javascript"> 
  (function(p, a, n, d, o, b) {
     o = n.createElement('script'); o.type = 'text/javascript'; o.async = true; o.src = 'https://tag.rightmessage.com/'+p+'.js';
     b = n.getElementsByTagName('script')[0]; b.parentNode.insertBefore(o, b);
     d = function(h, u, i) { var o = n.createElement('style'); o.id = 'rmcloak'+i; o.type = 'text/css';
             o.appendChild(n.createTextNode('.rmcloak'+h+'{visibility:hidden}.rmcloak'+u+'{display:none}'));
             b.parentNode.insertBefore(o, b); return o; }; o = d('', '-hidden', ''); d('-stay-invisible', '-stay-hidden', '-stay');
     setTimeout(function() { o.parentNode && o.parentNode.removeChild(o); }, a);
  })('1998050406', 2500, document);
  !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(n,a);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
  analytics.load('TQtxpBDBl25APWnGP3NiJSGmH7uSHzZk');
  analytics.page();
  }}();
</script>
<body class="font-light font-sans content post mb-6 text-base md:text-lg leading-relaxed"><div class="w-full bg-blue-darker p-6 bg-hero-topography-blue-lighter-10"><div class="container m-auto max-w-xl flex justify-between md:flex-row"><a class="no-underline text-white font-medium tracking-tight" href="https://mappingwithd3.com/">Geospatial Data Visualization with d3</a><div class="flex"><a class="no-underline text-white font-medium tracking-tight" href="https://mappingwithd3.com//resources">Resources</a></div></div></div><main id="content" role="main"><div class="container m-auto px-8 md:px-4 lg:p-0 md:flex-row max-w-xl">

<section class="font-sans"><div class="container m-auto flex flex-col md:flex-row max-w-xl"><div class="w-full lg:pt-6">
<h1 class="my-4 font-normal text-center leading-tight">
How to create a simple tooltip in d3
</h1>
</div></div></section>

<p>A common question I see on stackoverflow a lot is around Tooltips.<br />
There are a bunch of examples out there but people sometimes confuse their intention.<br />
So I thought I create a short post about Tooltips for d3.</p>

<h2 id="goal-of-a-tooltip">Goal of a tooltip</h2>

<p>The goal of the tooltip is to show information on things when you hover over them.<br />
And in our specific case we want the tooltip to follow the mouse.</p>

<h2 id="how-do-i-create-a-tooltip-in-d3">How do I create a tooltip in d3</h2>

<p>First off let’s add a new element to the page.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;body&#39;</span>).<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;div&#39;</span>);
</code></pre></div>

<p><strong>Important here: </strong><br />
Add it to the body or an div <strong>outside</strong> your SVG/Canvas. This is important!</p>

<h3 id="why">Why?</h3>

<p>We use the mouse position to change the position of the tooltip with <code>d3.event</code> but it gives you the <strong>absolute</strong> position of the mouse on the <em>screen</em> not within your SVG.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;body&#39;</span>)
.<span style="color:#a6e22e">append</span>(<span style="color:#e6db74">&#39;div&#39;</span>)
.<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;id&#39;</span>, <span style="color:#e6db74">&#39;tooltip&#39;</span>)
.<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;style&#39;</span>, <span style="color:#e6db74">&#39;position: absolute; opacity: 0;&#39;</span>);
</code></pre></div>

<p>We also set the position of the element to <code>absolute</code> so that it is outside of the flow of the document and can overlap other elements. We set the opacity to 0 to not show the tooltip by default.</p>

<h2 id="how-to-hook-up-the-tooltip-to-your-element">How to hook up the tooltip to your element</h2>

<p>Let‘s use a circle as an example.<br />
And let our data be <code>['a','b','c']</code>.<br />
We use three events to handle the tooltip.<br />
<code>mouseover</code> is used to handle the initial event. This is where we show the tooltip and change the content of the tooltip.</p>

<p><code>mouseout</code> is used to hide the tooltip once the mouse is out of the Element.</p>

<p><code>mousemove</code> is used to move the tooltip with the mouse.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;svg&#39;</span>).<span style="color:#a6e22e">selectAll</span>(<span style="color:#e6db74">&#39;circle&#39;</span>).<span style="color:#a6e22e">data</span>(<span style="color:#a6e22e">data</span>)
.<span style="color:#a6e22e">join</span>(<span style="color:#e6db74">&#39;circle&#39;</span>)
.<span style="color:#a6e22e">attr</span>(<span style="color:#e6db74">&#39;r&#39;</span>, <span style="color:#ae81ff">3</span>)
.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mouseover&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
})
.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mouseout&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
})
.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mousemove&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">e</span>) {
})
</code></pre></div>

<p>Let‘s look first at the <code>mouseover</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mouseover&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">d</span>) {
<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;#tooltip&#39;</span>).<span style="color:#a6e22e">style</span>(<span style="color:#e6db74">&#39;opacity&#39;</span>, <span style="color:#ae81ff">1</span>).<span style="color:#a6e22e">text</span>(<span style="color:#a6e22e">d</span>)
})
</code></pre></div>

<p>We‘re showing the tooltip element and setting the text to be the text of the data element that we‘re hovering over.<br />
In our example, if we hover over the first element the tooltip would have <code>a</code> as its text.<br />
You could even do it more smoothly using <code>transition</code></p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mouseover&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">d</span>) {
<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;#tooltip&#39;</span>).<span style="color:#a6e22e">transition</span>().<span style="color:#a6e22e">duration</span>(<span style="color:#ae81ff">200</span>).<span style="color:#a6e22e">style</span>(<span style="color:#e6db74">&#39;opacity&#39;</span>, <span style="color:#ae81ff">1</span>).<span style="color:#a6e22e">text</span>(<span style="color:#a6e22e">d</span>)
})
</code></pre></div>

<p>What this will accomplish is, that the tooltip will fade in instead of appear right away.</p>

<p>Next up is the <code>mouseout</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mouseout&#39;</span>, <span style="color:#66d9ef">function</span>() {
<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;#tooltip&#39;</span>).<span style="color:#a6e22e">style</span>(<span style="color:#e6db74">&#39;opacity&#39;</span>, <span style="color:#ae81ff">0</span>)
})
</code></pre></div>

<p>We‘re going to hide the tooltip once we leave that element.</p>

<p>And finally (which is optional) we look at <code>mousemove</code>:</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mousemove&#39;</span>, <span style="color:#66d9ef">function</span>() {
<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;#tooltip&#39;</span>)
.<span style="color:#a6e22e">style</span>(<span style="color:#e6db74">&#39;left&#39;</span>, <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">pageX</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>)
.<span style="color:#a6e22e">style</span>(<span style="color:#e6db74">&#39;top&#39;</span>, <span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">pageY</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>)
})
</code></pre></div>

<p>On the <code>mousemove</code> event we change the position of the tooltip to follow the mouse. Sometimes you want this, sometimes you don‘t. That‘s why it‘s optional. I usually add some padding to the position of the tooltip so that the cursor is not within the tooltip and the tooltip does not hide the element were looking at.</p>

<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-js" data-lang="js"><span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;mousemove&#39;</span>, <span style="color:#66d9ef">function</span>() {
<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">select</span>(<span style="color:#e6db74">&#39;#tooltip&#39;</span>)
.<span style="color:#a6e22e">style</span>(<span style="color:#e6db74">&#39;left&#39;</span>, (<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">pageX</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>)
.<span style="color:#a6e22e">style</span>(<span style="color:#e6db74">&#39;top&#39;</span>, (<span style="color:#a6e22e">d3</span>.<span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">pageY</span><span style="color:#f92672">+</span><span style="color:#ae81ff">10</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#39;px&#39;</span>)
})
</code></pre></div>

<p>This is the complete code and you can see the result below. Play around with it. It is interactive!</p>

<div id="code-example"></div><link href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.css" rel="stylesheet"><script src="https://unpkg.com/d3@5.9.7/dist/d3.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/javascript/javascript.js" type="text/javascript"></script><script src="https://mappingwithd3.com/js/repl.js" type="text/javascript"></script><script type="text/javascript">
function loadExample() {
  const replCode = 'd3.select(\x27body\x27).append(\x27div\x27).attr(\x27id\x27, \x27tooltip\x27).attr(\x27style\x27, \x27position: absolute; opacity: 0;\x27);\n d3.select(\x27body\x27).append(\x27svg\x27).attr(\x27width\x27, 300).attr(\x27height\x27, 300);\n d3.select(\x27svg\x27).selectAll(\x27circle\x27).data([\x27a\x27,\x27b\x27,\x27c\x27])\n .join(\x27circle\x27)\n .attr(\x27r\x27, 3)\n .attr(\x27cy\x27, 5)\n .attr(\x27cx\x27, (d,i) =\x3e i*15\x2b15)\n .on(\x27mouseover\x27, function(d) {\n d3.select(\x27#tooltip\x27).transition().duration(200).style(\x27opacity\x27, 1).text(d)\n })\n .on(\x27mouseout\x27, function() {\n d3.select(\x27#tooltip\x27).style(\x27opacity\x27, 0)\n })\n .on(\x27mousemove\x27, function() {\n d3.select(\x27#tooltip\x27).style(\x27left\x27, (d3.event.pageX\x2b10) \x2b \x27px\x27).style(\x27top\x27, (d3.event.pageY\x2b10) \x2b \x27px\x27)\n })\n';
  new JavascriptRepl({
    target: document.querySelector('#code-example'),
    props: {
      files: [{name: 'index.js', content: replCode, type: 'js' }],
      mode: 'minimal'
    }
  });
}
function makeDoubleDelegate(function1, function2) {
    return function() {
        if (function1)
            function1();
        if (function2)
            function2();
    }
}
window.onload = makeDoubleDelegate(window.onload, loadExample);
</script>




<style type="text/css">
.twitter-tweet {
    font: 14px/1.45 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;
        border-left: 4px solid #2b7bb9;
            padding-left: 1.5em;
                color: #555;
}
  .twitter-tweet a {
      color: #2b7bb9;
          text-decoration: none;
  }
    blockquote.twitter-tweet a:hover,
    blockquote.twitter-tweet a:focus {
        text-decoration: underline;
    }
</style>

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">One of the most asked question on <a href="https://twitter.com/StackOverflow?ref_src=twsrc%5Etfw">@StackOverflow</a> is around tooltips in d3. Here is all the code you need to create a tooltip in d3. (You just need to style it :) )<br><br>THREAD <a href="https://t.co/jBakt34zR9">pic.twitter.com/jBakt34zR9</a></p>&mdash; Mapping with d3 (@mappingwithd3) <a href="https://twitter.com/mappingwithd3/status/1171067111655038977?ref_src=twsrc%5Etfw">September 9, 2019</a></blockquote>

<div class="rm-after-resource-article"></div><h3>See Also</h3><div class="flex flex-col md:flex-row"><div class="text-xl md:mr-4 bg-blue-darker p-4 md:w-1/3 mb-4"><h4 class="mb-2"><a class="text-white" href="/resources/d3/svg-basics/">SVG Basics for d3</a></h4><p class="text-white">Three basic elements of SVG you should know if you want to create maps with d3. </p></div></div></div></main><div id="tooltip" class="bg-white p-2 border">
  <div class="text-center" id="small-map"></div>
  <div class="text-xl text-center border-b" id="community"></div>
  <div class="flex mt-2">
    <div class="w-1/2 ">
      <div class="text-gray-600 text-xs">30% of income</div>
      <div class="font-bold text-black" id="percentage-30">100</div>
    </div>
    <div class="w-1/2">
      <div class="text-gray-600 text-xs">50% of income</div>
      <div class="font-bold text-black" id="percentage-50">100</div>
    </div>
  </div>
</div>
<style>
  #tooltip {
    width: 250px;
    opacity: 0;
  }
</style>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="/javascript/housing-map.js"></script>
<script type="text/javascript">
  if(document.querySelector('#housing-map-parent')) {
    chart();
  }
</script>
<div class="footer">
  <div class="w-full bg-blue-darker p-6 bg-hero-topography-blue-lighter-10"><div class="container m-auto max-w-xl flex justify-between flex-col"><a class="no-underline text-white font-medium tracking-tight" href="https://mappingwithd3.com//resources">Resources</a><a class="no-underline text-white font-medium tracking-tight" href="http://milafrerichs.de">Instructor's Homepage</a></div></div>
</div>
<script type="text/javascript" data-cfasync="false">function SendUrlToDeadlineFunnel(e){var r,t,c,a,h,n,o,A,i = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d=0,l=0,s="",u=[];if(!e)return e;do r=e.charCodeAt(d++),t=e.charCodeAt(d++),c=e.charCodeAt(d++),A=r<<16|t<<8|c,a=A>>18&63,h=A>>12&63,n=A>>6&63,o=63&A,u[l++]=i.charAt(a)+i.charAt(h)+i.charAt(n)+i.charAt(o);while(d<e.length);s=u.join("");var C=e.length%3;var decoded = (C?s.slice(0,C-3):s)+"===".slice(C||3);decoded = decoded.replace("+", "-");decoded = decoded.replace("/", "_");return decoded;} var url = SendUrlToDeadlineFunnel(location.href); var parentUrlValue;try {parentUrlValue = window.parent.location.href;} catch(err) {if(err.name === "SecurityError") {parentUrlValue = document.referrer;}}var parentUrl = (parent !== window) ? ("/" + SendUrlToDeadlineFunnel(parentUrlValue)) : "";(function() {var s = document.createElement("script");s.type = "text/javascript";s.async = true;s.setAttribute("data-scriptid", "dfunifiedcode");s.src ="https://a.deadlinefunnel.com/unified/reactunified.bundle.js?userIdHash=eyJpdiI6IkhxeGFDRXJCdUFxWDNlVFNwa1JNVEE9PSIsInZhbHVlIjoiZWVMN1FTXC9JR01nMzhvZ0h5NXFUSGc9PSIsIm1hYyI6ImVjYTA4OTc4ZTA1YTQ1YTk5ZDliYTVlM2M1YjA0M2ViZWE5NTY4YTkxNjExODk5MjdkMjZkYzdiYTRjNGI5ZDYifQ==&pageFromUrl="+url+"&parentPageFromUrl="+parentUrl;var s2 = document.getElementsByTagName("script")[0];s2.parentNode.insertBefore(s, s2);})();</script>
<div class="modal"></div>
  
    <script src="https://unpkg.com/d3@5.9.7/dist/d3.min.js" type="text/javascript"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/codemirror.min.js" type="text/javascript"></script>
  
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.48.4/mode/javascript/javascript.js" type="text/javascript"></script>
  


  
    <script src="https://mappingwithd3.com/js/repl.js" type="text/javascript"></script>
  

</body></html>