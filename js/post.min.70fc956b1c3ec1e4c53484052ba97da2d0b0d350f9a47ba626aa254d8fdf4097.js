window.sendTags=function(subscriberId,tagId){const url='https://baihh9wyp5.execute-api.us-east-1.amazonaws.com/dev/tag_subscriber';const options={method:'POST',headers:{'Accept':'application/json','Content-Type':'application/json;charset=UTF-8'},body:JSON.stringify({subscriber_id:subscriberId,tag_id:tagId})};fetch(url,options).then(response=>{let resp=response;});}
window.maybeAddTags=function(post){var ckId=localStorage.getItem('rmpanda.sources.convertkit.subscriberId');if(ckId!=""&&post.tagId!=""){window.sendTags(ckId,post.tagId);}}
window.readPost=function(post){var postID=post.id;var categorySlug=post.categorySlug;var cachedPosts=JSON.parse(localStorage.getItem('rmCachedPosts'))||[];cachedPosts.unshift([postID,categorySlug.split(',')]);if(cachedPosts.length>20){cachedPosts.pop();}
var leaderboard={};var totalRead=cachedPosts.length;cachedPosts.forEach(function(pageview,idx){var pID=pageview[0];var categories=pageview[1];var score=0.5+((1.0-(idx/totalRead))*0.5);categories.forEach(function(cID){leaderboard[cID]=leaderboard[cID]||[];leaderboard[cID].push([pID,score]);});});var winningScore=0;var winningCategory=null;Object.keys(leaderboard).forEach(function(category){var categoryScore=0;var pageviews=leaderboard[category];pageviews.forEach(function(pageview){categoryScore=categoryScore+pageview[1];});leaderboard[category]=categoryScore;if(categoryScore>winningScore){winningScore=categoryScore;winningCategory=category;}});window.rmExtras.winningCategory=winningCategory;localStorage.setItem('rmCachedPosts',JSON.stringify(cachedPosts));};window.sendToRM=function(key,value){window.rmExtras[key]=value;};window.addLoadEvent=function(func){var oldonload=window.onload;if(typeof window.onload!='function'){window.onload=func;}else{window.onload=function(){if(oldonload){oldonload();}
func();};}};function menu(){let menu=document.getElementById('menu')
let menuContainer=document.getElementById('menu-container')
let menuHeader=document.getElementById('menu-header')
menu.onclick=function(e){menuContainer.classList.toggle('hidden');menuHeader.classList.toggle('fixed');menuHeader.classList.toggle('top-0');};}
addLoadEvent(menu);if(document.querySelector('#housing-map-parent')){chart();}